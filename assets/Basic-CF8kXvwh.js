import{e as k,j as b,d as F,l as Ke,r as u}from"./iframe-DLpz0ihO.js";import{r as ue}from"./index-Bhk6geoC.js";const Ut=e=>{let t;const n=new Set,i=(c,h)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const v=t;t=h??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,v))}},r=()=>t,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=t=e(i,r,a);return a},Qn=e=>e?Ut(e):Ut,Zn=e=>e;function ei(e,t=Zn){const n=k.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return k.useDebugValue(n),n}const $t=e=>{const t=Qn(e),n=i=>ei(t,i);return Object.assign(n,t),n},ti=e=>e?$t(e):$t,Ue={WIDTH:500,HEIGHT:500},bn=20,je=ti((e,t)=>({show:!0,dim:{active:!0,isCloseOnDimClick:!0,innerBoundSizeUnitPixel:bn},modals:[],documentBody:void 0,setState:n=>{const i=t(),r=typeof n=="function"?n(i):n;e({...i,...r})}}));function bt({children:e}){return b.jsxs(ni,{children:[e,b.jsx("div",{})]})}const ni=F.div`
  overflow: auto;
  height: 100%;
  padding: 20px;
`;bt.__docgenInfo={description:"",methods:[],displayName:"ModalContent"};function mt({modalController:e,variant:t="alert"}){return b.jsx(ii,{children:(()=>{switch(t){case"alert":return b.jsx(Ne,{onClick:()=>{e!=null&&e.handleClose&&(e==null||e.handleClose())},children:"확인"});case"confirm":return b.jsxs(b.Fragment,{children:[b.jsx(Ne,{onClick:()=>{e!=null&&e.handleClose&&(e==null||e.handleClose())},children:"취소"}),b.jsx(Ne,{onClick:()=>{e!=null&&e.handleClose&&(e==null||e.handleClose())},children:"확인"})]});case"prompt":return b.jsxs(b.Fragment,{children:[b.jsx(Ne,{onClick:()=>{e!=null&&e.handleClose&&(e==null||e.handleClose())},children:"취소"}),b.jsx(Ne,{onClick:()=>{e!=null&&e.handleClose&&(e==null||e.handleClose())},children:"입력"})]});default:return null}})()})}const ii=F.div`
  padding: 20px;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
`,Ne=F.button`
  min-width: 60px;
  padding: 5px 10px;
  background-color: #5252ff;
  color: white;
  border: none;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.1s ease-in-out;
  &:hover {
    filter: brightness(1.2);
  }

  &:active {
    filter: brightness(0.8);
  }
`;mt.__docgenInfo={description:"",methods:[],displayName:"ModalFooter",props:{modalController:{required:!0,tsType:{name:"IModalController"},description:""},variant:{required:!1,tsType:{name:"IVariant"},description:"",defaultValue:{value:'"alert"',computed:!1}}}};const ri="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%200.859375L15%2014.8594M15%200.859375L1%2014.8594'%20stroke='currentColor'%20stroke-width='2'/%3e%3c/svg%3e",si="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABHNCSVQICAgIfAhkiAAAAIVJREFUSEtjPH3u0n8G/OCgqZGeAy4lQP0HgHL2+IwA6mdkpLtFIFsJ+IxkaZgnUHw0ahEx4Tj8gw6UDxjw5RViggmbGmgeA5tN9SSNy1GjFpEbXQyjQUd+0EHT+n9gWnck2xQcGpHNhtdHo6U3McE8/EtvcCuIbokBT5gPseYWMamHGmoAF4qWGwBL/3IAAAAASUVORK5CYII=";function wt({title:e,modalController:t,modalFlag:n,onClose:i,showCancelBtn:r,showMaximizeBtn:s}){return console.log("modalController",n,t),b.jsxs(oi,{className:"layout",$isDraggable:!!(t!=null&&t.handleDragListener),onDoubleClick:()=>{t!=null&&t.handleMaximize&&t.handleMaximize()},...(t==null?void 0:t.handleDragListener)||null,children:[b.jsx(ai,{children:b.jsx("h5",{className:"title",children:e||""})}),b.jsxs(ci,{children:[!s||!(t!=null&&t.handleMaximize)?null:b.jsx(Xt,{$isToggle:n==null?void 0:n.isMaximize,onClick:()=>{t!=null&&t.handleMaximize&&t.handleMaximize()},onMouseDown:o=>{o.stopPropagation()},onTouchStart:o=>{o.stopPropagation()},children:b.jsx("img",{style:{height:"100%"},src:si,alt:"풀스크린 버튼"})}),!r||!(t!=null&&t.handleClose)?null:b.jsx(Xt,{onClick:o=>{t!=null&&t.handleClose&&(t==null||t.handleClose(),i&&i())},onMouseDown:o=>{o.stopPropagation()},onTouchStart:o=>{o.stopPropagation()},children:b.jsx("img",{style:{filter:"invert(1"},src:ri,alt:""})})]})]})}const oi=F.div`
  cursor: ${e=>e!=null&&e.isDraggable?"move":"default"};
  display: flex;
  align-items: stretch;
  justify-content: space-between;
  overflow: hidden;
  color: white;
  background-color: #0665d4;
  gap: 10px;
`,ai=F.div`
  padding: 10px;
  display: flex;

  align-items: center;

  .title {
    margin: 0;
    padding: 10px 0;
    font-size: 20px;
    font-weight: 600;
  }
`,ci=F.div`
  display: flex;
  align-items: stretch;
  justify-content: flex-end;
  padding: 0;
  overflow: hidden;
  color: white;
  transition: all 0.1s ease-in-out;
`,Xt=F.button`
  background-color: ${e=>e!=null&&e.$isToggle?" #122d84":"#0665d4"};
  cursor: pointer;
  color: inherit;
  user-select: none;
  border: none;
  &:hover {
    filter: brightness(0.8);
  }
  padding: 10px;
`;wt.__docgenInfo={description:"",methods:[],displayName:"ModalHeader",props:{title:{required:!1,tsType:{name:"string"},description:""},modalController:{required:!1,tsType:{name:"IModalController"},description:""},modalFlag:{required:!1,tsType:{name:"IModalFlag"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},showCancelBtn:{required:!1,tsType:{name:"boolean"},description:""},showMaximizeBtn:{required:!1,tsType:{name:"boolean"},description:""}}};function yt({children:e,...t}){return b.jsx(li,{...t,className:"ModalLayout_SLayout",children:e})}const li=F.div`
  display: flex;
  flex-direction: column;
  height: 100%;

  border: 1px solid rgba(0, 0, 0, 0.3);
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  overflow: hidden;
`;yt.__docgenInfo={description:"",methods:[],displayName:"ModalLayout"};function mn({children:e,isCloseOnDimClick:t,active:n,styles:i,innerBoundSizeUnitPixel:r}){const s=je(o=>o.setState);return b.jsx(ui,{$innerBoundSizeUnitPixel:r,style:i==null?void 0:i.dimRoot,className:"dim_root",$active:n,children:b.jsx(di,{style:i==null?void 0:i.dimRoot,className:"dim_inner",onClick:o=>{o.target===o.currentTarget&&t&&s(a=>({...a,modals:[]}))},children:e})})}const Yt={active:Ke`
    pointer-events: auto;
  `,disActive:Ke`
    pointer-events: none;
    background-color: transparent;
  `},ui=F.section`
  position: fixed;
  /* TODO: 모달용 z-index 상수로 교체 */
  z-index: 90;
  left: 0;
  top: 0;
  width: 100%;

  // re-resizable 모달을 내부로 가두기 위한 패딩\
  // 드래그 및 드롭 기능의 경계선
  padding: ${({$innerBoundSizeUnitPixel:e})=>`${e}px`||0};
  height: 100%;
  box-sizing: border-box;
  background: rgba(0, 0, 0, 0.6);

  ${({$active:e})=>e?Yt.active:Yt.disActive};

  & * {
    box-sizing: border-box;
  }
`,di=F.section`
  position: relative;
  width: 100%;
  height: 100%;
`;mn.__docgenInfo={description:"",methods:[],displayName:"Dim",props:{active:{required:!0,tsType:{name:"boolean"},description:""},isCloseOnDimClick:{required:!0,tsType:{name:"boolean"},description:""},styles:{required:!1,tsType:{name:"union",raw:'ImodalsAtomDim["styles"] | undefined',elements:[{name:'ImodalsAtomDim["styles"]',raw:'ImodalsAtomDim["styles"]'},{name:"undefined"}]},description:""},innerBoundSizeUnitPixel:{required:!0,tsType:{name:"number"},description:""}}};var N=function(){return N=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},N.apply(this,arguments)},Vt={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Gt={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},$e={width:"20px",height:"20px",position:"absolute",zIndex:1},hi={top:N(N({},Vt),{top:"-5px"}),right:N(N({},Gt),{left:void 0,right:"-5px"}),bottom:N(N({},Vt),{top:void 0,bottom:"-5px"}),left:N(N({},Gt),{left:"-5px"}),topRight:N(N({},$e),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:N(N({},$e),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:N(N({},$e),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:N(N({},$e),{left:"-10px",top:"-10px",cursor:"nw-resize"})},fi=u.memo(function(e){var t=e.onResizeStart,n=e.direction,i=e.children,r=e.replaceStyles,s=e.className,o=u.useCallback(function(c){t(c,n)},[t,n]),a=u.useCallback(function(c){t(c,n)},[t,n]),l=u.useMemo(function(){return N(N({position:"absolute",userSelect:"none"},hi[n]),r??{})},[r,n]);return b.jsx("div",{className:s||void 0,style:l,onMouseDown:o,onTouchStart:a,children:i})}),pi=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ee=function(){return ee=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ee.apply(this,arguments)},gi={width:"auto",height:"auto"},Xe=function(e,t,n){return Math.max(Math.min(e,n),t)},Kt=function(e,t,n){var i=Math.round(e/t);return i*t+n*(i-1)},Se=function(e,t){return new RegExp(e,"i").test(t)},Ye=function(e){return!!(e.touches&&e.touches.length)},vi=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Jt=function(e,t,n){n===void 0&&(n=0);var i=t.reduce(function(s,o,a){return Math.abs(o-e)<Math.abs(t[s]-e)?a:s},0),r=Math.abs(t[i]-e);return n===0||r<n?t[i]:e},ot=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},Ve=function(e,t,n,i){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var r=Number(e.replace("%",""))/100;return t*r}if(e.endsWith("vw")){var r=Number(e.replace("vw",""))/100;return n*r}if(e.endsWith("vh")){var r=Number(e.replace("vh",""))/100;return i*r}}return e},bi=function(e,t,n,i,r,s,o){return i=Ve(i,e.width,t,n),r=Ve(r,e.height,t,n),s=Ve(s,e.width,t,n),o=Ve(o,e.height,t,n),{maxWidth:typeof i>"u"?void 0:Number(i),maxHeight:typeof r>"u"?void 0:Number(r),minWidth:typeof s>"u"?void 0:Number(s),minHeight:typeof o>"u"?void 0:Number(o)}},mi=function(e){return Array.isArray(e)?e:[e,e]},wi=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Qt="__resizable_base__",yi=function(e){pi(t,e);function t(n){var i,r,s,o,a=e.call(this,n)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var l=a.parentNode;if(!l)return null;var c=a.window.document.createElement("div");return c.style.width="100%",c.style.height="100%",c.style.position="absolute",c.style.transform="scale(0, 0)",c.style.left="0",c.style.flex="0 0 100%",c.classList?c.classList.add(Qt):c.className+=Qt,l.appendChild(c),c},a.removeBase=function(l){var c=a.parentNode;c&&c.removeChild(l)},a.state={isResizing:!1,width:(r=(i=a.propsSize)===null||i===void 0?void 0:i.width)!==null&&r!==void 0?r:"auto",height:(o=(s=a.propsSize)===null||s===void 0?void 0:s.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||gi},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var n=0,i=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:r,i=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var n=this,i=this.props.size,r=function(a){var l;if(typeof n.state[a]>"u"||n.state[a]==="auto")return"auto";if(n.propsSize&&n.propsSize[a]&&(!((l=n.propsSize[a])===null||l===void 0)&&l.toString().endsWith("%"))){if(n.state[a].toString().endsWith("%"))return n.state[a].toString();var c=n.getParentSize(),h=Number(n.state[a].toString().replace("px","")),d=h/c[a]*100;return"".concat(d,"%")}return ot(n.state[a])},s=i&&typeof i.width<"u"&&!this.state.isResizing?ot(i.width):r("width"),o=i&&typeof i.height<"u"&&!this.state.isResizing?ot(i.height):r("height");return{width:s,height:o}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var i=!1,r=this.parentNode.style.flexWrap;r!=="wrap"&&(i=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var s={width:n.offsetWidth,height:n.offsetHeight};return i&&(this.parentNode.style.flexWrap=r),this.removeBase(n),s},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(n,i){var r=this.propsSize&&this.propsSize[i];return this.state[i]==="auto"&&this.state.original[i]===n&&(typeof r>"u"||r==="auto")?"auto":n},t.prototype.calculateNewMaxFromBoundary=function(n,i){var r=this.props.boundsByDirection,s=this.state.direction,o=r&&Se("left",s),a=r&&Se("top",s),l,c;if(this.props.bounds==="parent"){var h=this.parentNode;h&&(l=o?this.resizableRight-this.parentLeft:h.offsetWidth+(this.parentLeft-this.resizableLeft),c=a?this.resizableBottom-this.parentTop:h.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(l=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,c=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(l=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),c=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return l&&Number.isFinite(l)&&(n=n&&n<l?n:l),c&&Number.isFinite(c)&&(i=i&&i<c?i:c),{maxWidth:n,maxHeight:i}},t.prototype.calculateNewSizeFromDirection=function(n,i){var r=this.props.scale||1,s=mi(this.props.resizeRatio||1),o=s[0],a=s[1],l=this.state,c=l.direction,h=l.original,d=this.props,v=d.lockAspectRatio,p=d.lockAspectRatioExtraHeight,m=d.lockAspectRatioExtraWidth,f=h.width,g=h.height,y=p||0,R=m||0;return Se("right",c)&&(f=h.width+(n-h.x)*o/r,v&&(g=(f-R)/this.ratio+y)),Se("left",c)&&(f=h.width-(n-h.x)*o/r,v&&(g=(f-R)/this.ratio+y)),Se("bottom",c)&&(g=h.height+(i-h.y)*a/r,v&&(f=(g-y)*this.ratio+R)),Se("top",c)&&(g=h.height-(i-h.y)*a/r,v&&(f=(g-y)*this.ratio+R)),{newWidth:f,newHeight:g}},t.prototype.calculateNewSizeFromAspectRatio=function(n,i,r,s){var o=this.props,a=o.lockAspectRatio,l=o.lockAspectRatioExtraHeight,c=o.lockAspectRatioExtraWidth,h=typeof s.width>"u"?10:s.width,d=typeof r.width>"u"||r.width<0?n:r.width,v=typeof s.height>"u"?10:s.height,p=typeof r.height>"u"||r.height<0?i:r.height,m=l||0,f=c||0;if(a){var g=(v-m)*this.ratio+f,y=(p-m)*this.ratio+f,R=(h-f)/this.ratio+m,w=(d-f)/this.ratio+m,x=Math.max(h,g),z=Math.min(d,y),D=Math.max(v,R),S=Math.min(p,w);n=Xe(n,x,z),i=Xe(i,D,S)}else n=Xe(n,h,d),i=Xe(i,v,p);return{newWidth:n,newHeight:i}},t.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var i=this.parentNode;if(i){var r=i.getBoundingClientRect();this.parentLeft=r.left*n,this.parentTop=r.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*n,this.targetTop=s.top*n}if(this.resizable){var o=this.resizable.getBoundingClientRect(),a=o.left,l=o.top,c=o.right,h=o.bottom;this.resizableLeft=a*n,this.resizableRight=c*n,this.resizableTop=l*n,this.resizableBottom=h*n}},t.prototype.onResizeStart=function(n,i){if(!(!this.resizable||!this.window)){var r=0,s=0;if(n.nativeEvent&&vi(n.nativeEvent)?(r=n.nativeEvent.clientX,s=n.nativeEvent.clientY):n.nativeEvent&&Ye(n.nativeEvent)&&(r=n.nativeEvent.touches[0].clientX,s=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(n,i,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,l=this.window.getComputedStyle(this.resizable);if(l.flexBasis!=="auto"){var c=this.parentNode;if(c){var h=this.window.getComputedStyle(c).flexDirection;this.flexDir=h.startsWith("row")?"row":"column",a=l.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:ee(ee({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:i,flexBasis:a};this.setState(d)}},t.prototype.onMouseMove=function(n){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Ye(n))try{n.preventDefault(),n.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,o=r.maxHeight,a=r.minWidth,l=r.minHeight,c=Ye(n)?n.touches[0].clientX:n.clientX,h=Ye(n)?n.touches[0].clientY:n.clientY,d=this.state,v=d.direction,p=d.original,m=d.width,f=d.height,g=this.getParentSize(),y=bi(g,this.window.innerWidth,this.window.innerHeight,s,o,a,l);s=y.maxWidth,o=y.maxHeight,a=y.minWidth,l=y.minHeight;var R=this.calculateNewSizeFromDirection(c,h),w=R.newHeight,x=R.newWidth,z=this.calculateNewMaxFromBoundary(s,o);this.props.snap&&this.props.snap.x&&(x=Jt(x,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=Jt(w,this.props.snap.y,this.props.snapGap));var D=this.calculateNewSizeFromAspectRatio(x,w,{width:z.maxWidth,height:z.maxHeight},{width:a,height:l});if(x=D.newWidth,w=D.newHeight,this.props.grid){var S=Kt(x,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),M=Kt(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,I=C===0||Math.abs(S-x)<=C?S:x,A=C===0||Math.abs(M-w)<=C?M:w;x=I,w=A}var q={width:x-p.width,height:w-p.height};if(this.delta=q,m&&typeof m=="string"){if(m.endsWith("%")){var W=x/g.width*100;x="".concat(W,"%")}else if(m.endsWith("vw")){var U=x/this.window.innerWidth*100;x="".concat(U,"vw")}else if(m.endsWith("vh")){var ge=x/this.window.innerHeight*100;x="".concat(ge,"vh")}}if(f&&typeof f=="string"){if(f.endsWith("%")){var W=w/g.height*100;w="".concat(W,"%")}else if(f.endsWith("vw")){var U=w/this.window.innerWidth*100;w="".concat(U,"vw")}else if(f.endsWith("vh")){var ge=w/this.window.innerHeight*100;w="".concat(ge,"vh")}}var Y={width:this.createSizeForCssProperty(x,"width"),height:this.createSizeForCssProperty(w,"height")};this.flexDir==="row"?Y.flexBasis=Y.width:this.flexDir==="column"&&(Y.flexBasis=Y.height);var V=this.state.width!==Y.width,_e=this.state.height!==Y.height,te=this.state.flexBasis!==Y.flexBasis,ve=V||_e||te;ve&&ue.flushSync(function(){i.setState(Y)}),this.props.onResize&&ve&&this.props.onResize(n,v,this.resizable,q)}},t.prototype.onMouseUp=function(n){var i,r,s=this.state,o=s.isResizing,a=s.direction;s.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,a,this.resizable,this.delta),this.props.size&&this.setState({width:(i=this.props.size.width)!==null&&i!==void 0?i:"auto",height:(r=this.props.size.height)!==null&&r!==void 0?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:ee(ee({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(n){var i,r;this.setState({width:(i=n.width)!==null&&i!==void 0?i:"auto",height:(r=n.height)!==null&&r!==void 0?r:"auto"})},t.prototype.renderResizer=function(){var n=this,i=this.props,r=i.enable,s=i.handleStyles,o=i.handleClasses,a=i.handleWrapperStyle,l=i.handleWrapperClass,c=i.handleComponent;if(!r)return null;var h=Object.keys(r).map(function(d){return r[d]!==!1?b.jsx(fi,{direction:d,onResizeStart:n.onResizeStart,replaceStyles:s&&s[d],className:o&&o[d],children:c&&c[d]?c[d]:null},d):null});return b.jsx("div",{className:l,style:a,children:h})},t.prototype.render=function(){var n=this,i=Object.keys(this.props).reduce(function(o,a){return wi.indexOf(a)!==-1||(o[a]=n.props[a]),o},{}),r=ee(ee(ee({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var s=this.props.as||"div";return b.jsxs(s,ee({style:r,className:this.props.className},i,{ref:function(o){o&&(n.resizable=o)},children:[this.state.isResizing&&b.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(u.PureComponent);function Zt(e,t){return typeof e=="number"?e+"px":e}function ce(e){if(typeof e=="number")return e;if(typeof e=="string"){const n=["px","em","rem","%","vh","vw","vmin","vmax","cm","mm","in","pt","pc","ex","ch","lh","rlh"].find(s=>e.endsWith(s)),i=n?e.slice(0,-n.length).trim():e,r=Number(i);return isNaN(r)?void 0:r}}function wn({active:e,modalBbox:t,setModalBbox:n,modalFlag:i,modalRef:r,children:s,onBringToFront:o}){const[a,l]=u.useState({x:void 0,y:void 0}),c=u.useCallback((v,p,m)=>{l({x:m.offsetLeft,y:m.offsetTop})},[l]),h=u.useCallback((v,p,m,f)=>{a.x!==void 0&&a.y!==void 0&&ue.flushSync(()=>{(p==="left"||p==="bottomLeft")&&n(g=>({...g,x:Number(a.x)-f.width})),p==="top"&&n(g=>({...g,y:Number(a.y)-f.height})),p==="topLeft"&&n(g=>({...g,x:Number(a.x)-f.width,y:Number(a.y)-f.height})),p==="topRight"&&n(g=>({...g,y:Number(a.y)-f.height})),n(g=>({...g,width:m.offsetWidth,height:m.offsetHeight}))})},[a,n]),d=u.useRef({memo:!1,x:void 0,y:void 0,width:void 0,height:void 0});return u.useEffect(function(){if(i.isMaximize)n(p=>(d.current.width=p.width,d.current.height=p.height,d.current.x=p.x,d.current.y=p.y,{...p,x:0,y:0,width:"100%",height:"100%"})),d.current.memo=!0;else if(d.current.memo){const p=d.current;n(m=>({...m,x:p.x,y:p.y,width:p.width,height:p.height})),d.current={memo:!1,x:void 0,y:void 0,width:void 0,height:void 0}}},[i.isMaximize]),b.jsx(yi,{className:"ModalView_root",ref:v=>{r.current&&(r.current.resizableContainer=v)},enable:e&&{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},onResizeStart:c,onResize:h,style:{position:"absolute",left:Zt(t.x),top:Zt(t.y),pointerEvents:"auto"},minWidth:t==null?void 0:t.minWidth,minHeight:t==null?void 0:t.minHeight,size:{width:t.width,height:t.height},boundsByDirection:!0,bounds:"parent",children:b.jsx(xi,{onClick:()=>{o&&o()},onDragStart:()=>{o&&o()},$isMaximize:i.isMaximize,children:s})})}const en={maximize:Ke`
    width: 100%;
    height: 100%;
  `,disMaximize:Ke``},xi=F.section`
  width: 100%;
  height: 100%;
  /* 자식 요소에 그림자 렌더링이 안되서 끔. 문제 되면 다시 수정 */
  /* overflow: hidden; */
  background-color: white;
  border-radius: 8px;
  pointer-events: auto;
  transition: all 0.1s ease-in-out;

  ${({$isMaximize:e})=>e?en.maximize:en.disMaximize}
`;wn.__docgenInfo={description:"",methods:[],displayName:"ModalResizing",props:{active:{required:!0,tsType:{name:"boolean"},description:""},modalBbox:{required:!0,tsType:{name:"IModalBbox"},description:""},setModalBbox:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<IModalBbox>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<IModalBbox>",elements:[{name:"IModalBbox"}]}]},description:""},modalFlag:{required:!0,tsType:{name:"IModalFlag"},description:""},modalRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<IModalRef>",elements:[{name:"IModalRef"}]},description:""},onBringToFront:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Si=u.memo(function({children:t,setModalJotai:n,setModalFlag:i,id:r,setModalController:s}){const o=()=>{n(l=>({...l,modals:l.modals.filter(c=>c.metadata.id!==r)}))},a=l=>i(l===!0||l===!1?c=>({...c,isMaximize:l}):c=>({...c,isMaximize:!c.isMaximize}));return u.useEffect(()=>{s(l=>({...l,handleClose:o,handleMaximize:a}))},[s,n,i]),t}),et=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Me(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function xt(e){return"nodeType"in e}function B(e){var t,n;return e?Me(e)?e:xt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function St(e){const{Document:t}=B(e);return e instanceof t}function ke(e){return Me(e)?!1:e instanceof B(e).HTMLElement}function yn(e){return e instanceof B(e).SVGElement}function ze(e){return e?Me(e)?e.document:xt(e)?St(e)?e:ke(e)||yn(e)?e.ownerDocument:document:document:document}const de=et?u.useLayoutEffect:u.useEffect;function Rt(e){const t=u.useRef(e);return de(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t.current==null?void 0:t.current(...i)},[])}function Ri(){const e=u.useRef(null),t=u.useCallback((i,r)=>{e.current=setInterval(i,r)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Mt(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return de(()=>{n.current!==e&&(n.current=e)},t),n}function Be(e,t){const n=u.useRef();return u.useMemo(()=>{const i=e(n.current);return n.current=i,i},[...t])}function dt(e){const t=Rt(e),n=u.useRef(null),i=u.useCallback(r=>{r!==n.current&&(t==null||t(r,n.current)),n.current=r},[]);return[n,i]}function ht(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let at={};function zt(e,t){return u.useMemo(()=>{if(t)return t;const n=at[e]==null?0:at[e]+1;return at[e]=n,e+"-"+n},[e,t])}function xn(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const h=s[l];h!=null&&(s[l]=h+e*c)}return s},{...t})}}const Re=xn(1),Je=xn(-1);function Mi(e){return"clientX"in e&&"clientY"in e}function Sn(e){if(!e)return!1;const{KeyboardEvent:t}=B(e.target);return t&&e instanceof t}function zi(e){if(!e)return!1;const{TouchEvent:t}=B(e.target);return t&&e instanceof t}function ft(e){if(zi(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Mi(e)?{x:e.clientX,y:e.clientY}:null}const tn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Di(e){return e.matches(tn)?e:e.querySelector(tn)}const Ei={display:"none"};function Ci(e){let{id:t,value:n}=e;return k.createElement("div",{id:t,style:Ei},n)}function Ai(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return k.createElement("div",{id:t,style:r,role:"status","aria-live":i,"aria-atomic":!0},n)}function Ni(){const[e,t]=u.useState("");return{announce:u.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const Rn=u.createContext(null);function Ti(e){const t=u.useContext(Rn);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Ii(){const[e]=u.useState(()=>new Set),t=u.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[u.useCallback(i=>{let{type:r,event:s}=i;e.forEach(o=>{var a;return(a=o[r])==null?void 0:a.call(o,s)})},[e]),t]}const Oi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Li={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ji(e){let{announcements:t=Li,container:n,hiddenTextDescribedById:i,screenReaderInstructions:r=Oi}=e;const{announce:s,announcement:o}=Ni(),a=zt("DndLiveRegion"),[l,c]=u.useState(!1);if(u.useEffect(()=>{c(!0)},[]),Ti(u.useMemo(()=>({onDragStart(d){let{active:v}=d;s(t.onDragStart({active:v}))},onDragMove(d){let{active:v,over:p}=d;t.onDragMove&&s(t.onDragMove({active:v,over:p}))},onDragOver(d){let{active:v,over:p}=d;s(t.onDragOver({active:v,over:p}))},onDragEnd(d){let{active:v,over:p}=d;s(t.onDragEnd({active:v,over:p}))},onDragCancel(d){let{active:v,over:p}=d;s(t.onDragCancel({active:v,over:p}))}}),[s,t])),!l)return null;const h=k.createElement(k.Fragment,null,k.createElement(Ci,{id:i,value:r.draggable}),k.createElement(Ai,{id:a,announcement:o}));return n?ue.createPortal(h,n):h}var j;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(j||(j={}));function Qe(){}function nn(e,t){return u.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ki(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const J=Object.freeze({x:0,y:0});function Bi(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function Wi(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function _i(e,t){const n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),o=r-i,a=s-n;if(i<r&&n<s){const l=t.width*t.height,c=e.width*e.height,h=o*a,d=h/(l+c-h);return Number(d.toFixed(4))}return 0}const Pi=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const r=[];for(const s of i){const{id:o}=s,a=n.get(o);if(a){const l=_i(a,t);l>0&&r.push({id:o,data:{droppableContainer:s,value:l}})}}return r.sort(Bi)};function Hi(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Mn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:J}function Fi(e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];return r.reduce((o,a)=>({...o,top:o.top+e*a.y,bottom:o.bottom+e*a.y,left:o.left+e*a.x,right:o.right+e*a.x}),{...n})}}const qi=Fi(1);function Ui(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function $i(e,t,n){const i=Ui(t);if(!i)return e;const{scaleX:r,scaleY:s,x:o,y:a}=i,l=e.left-o-(1-r)*parseFloat(n),c=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=r?e.width/r:e.width,d=s?e.height/s:e.height;return{width:h,height:d,top:c,right:l+h,bottom:c+d,left:l}}const Xi={ignoreTransform:!1};function We(e,t){t===void 0&&(t=Xi);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:h}=B(e).getComputedStyle(e);c&&(n=$i(n,c,h))}const{top:i,left:r,width:s,height:o,bottom:a,right:l}=n;return{top:i,left:r,width:s,height:o,bottom:a,right:l}}function rn(e){return We(e,{ignoreTransform:!0})}function Yi(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Vi(e,t){return t===void 0&&(t=B(e).getComputedStyle(e)),t.position==="fixed"}function Gi(e,t){t===void 0&&(t=B(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const s=t[r];return typeof s=="string"?n.test(s):!1})}function Dt(e,t){const n=[];function i(r){if(t!=null&&n.length>=t||!r)return n;if(St(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!ke(r)||yn(r)||n.includes(r))return n;const s=B(e).getComputedStyle(r);return r!==e&&Gi(r,s)&&n.push(r),Vi(r,s)?n:i(r.parentNode)}return e?i(e):n}function zn(e){const[t]=Dt(e,1);return t??null}function ct(e){return!et||!e?null:Me(e)?e:xt(e)?St(e)||e===ze(e).scrollingElement?window:ke(e)?e:null:null}function Dn(e){return Me(e)?e.scrollX:e.scrollLeft}function En(e){return Me(e)?e.scrollY:e.scrollTop}function pt(e){return{x:Dn(e),y:En(e)}}var T;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(T||(T={}));function Cn(e){return!et||!e?!1:e===document.scrollingElement}function An(e){const t={x:0,y:0},n=Cn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,o=e.scrollTop>=i.y,a=e.scrollLeft>=i.x;return{isTop:r,isLeft:s,isBottom:o,isRight:a,maxScroll:i,minScroll:t}}const Ki={x:.2,y:.2};function Ji(e,t,n,i,r){let{top:s,left:o,right:a,bottom:l}=n;i===void 0&&(i=10),r===void 0&&(r=Ki);const{isTop:c,isBottom:h,isLeft:d,isRight:v}=An(e),p={x:0,y:0},m={x:0,y:0},f={height:t.height*r.y,width:t.width*r.x};return!c&&s<=t.top+f.height?(p.y=T.Backward,m.y=i*Math.abs((t.top+f.height-s)/f.height)):!h&&l>=t.bottom-f.height&&(p.y=T.Forward,m.y=i*Math.abs((t.bottom-f.height-l)/f.height)),!v&&a>=t.right-f.width?(p.x=T.Forward,m.x=i*Math.abs((t.right-f.width-a)/f.width)):!d&&o<=t.left+f.width&&(p.x=T.Backward,m.x=i*Math.abs((t.left+f.width-o)/f.width)),{direction:p,speed:m}}function Qi(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:t,left:n,right:i,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Nn(e){return e.reduce((t,n)=>Re(t,pt(n)),J)}function Zi(e){return e.reduce((t,n)=>t+Dn(n),0)}function er(e){return e.reduce((t,n)=>t+En(n),0)}function tr(e,t){if(t===void 0&&(t=We),!e)return;const{top:n,left:i,bottom:r,right:s}=t(e);zn(e)&&(r<=0||s<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const nr=[["x",["left","right"],Zi],["y",["top","bottom"],er]];class Et{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Dt(n),r=Nn(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,o,a]of nr)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(i),h=r[s]-c;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Te{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=t}add(t,n,i){var r;(r=this.target)==null||r.addEventListener(t,n,i),this.listeners.push([t,n,i])}}function ir(e){const{EventTarget:t}=B(e);return e instanceof t?e:ze(e)}function lt(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t?i>t.y:!1}var X;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(X||(X={}));function sn(e){e.preventDefault()}function rr(e){e.stopPropagation()}var E;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(E||(E={}));const Tn={start:[E.Space,E.Enter],cancel:[E.Esc],end:[E.Space,E.Enter,E.Tab]},sr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case E.Right:return{...n,x:n.x+25};case E.Left:return{...n,x:n.x-25};case E.Down:return{...n,y:n.y+25};case E.Up:return{...n,y:n.y-25}}};class In{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Te(ze(n)),this.windowListeners=new Te(B(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(X.Resize,this.handleCancel),this.windowListeners.add(X.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(X.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,i=t.node.current;i&&tr(i),n(J)}handleKeyDown(t){if(Sn(t)){const{active:n,context:i,options:r}=this.props,{keyboardCodes:s=Tn,coordinateGetter:o=sr,scrollBehavior:a="smooth"}=r,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:c}=i.current,h=c?{x:c.left,y:c.top}:J;this.referenceCoordinates||(this.referenceCoordinates=h);const d=o(t,{active:n,context:i.current,currentCoordinates:h});if(d){const v=Je(d,h),p={x:0,y:0},{scrollableAncestors:m}=i.current;for(const f of m){const g=t.code,{isTop:y,isRight:R,isLeft:w,isBottom:x,maxScroll:z,minScroll:D}=An(f),S=Qi(f),M={x:Math.min(g===E.Right?S.right-S.width/2:S.right,Math.max(g===E.Right?S.left:S.left+S.width/2,d.x)),y:Math.min(g===E.Down?S.bottom-S.height/2:S.bottom,Math.max(g===E.Down?S.top:S.top+S.height/2,d.y))},C=g===E.Right&&!R||g===E.Left&&!w,I=g===E.Down&&!x||g===E.Up&&!y;if(C&&M.x!==d.x){const A=f.scrollLeft+v.x,q=g===E.Right&&A<=z.x||g===E.Left&&A>=D.x;if(q&&!v.y){f.scrollTo({left:A,behavior:a});return}q?p.x=f.scrollLeft-A:p.x=g===E.Right?f.scrollLeft-z.x:f.scrollLeft-D.x,p.x&&f.scrollBy({left:-p.x,behavior:a});break}else if(I&&M.y!==d.y){const A=f.scrollTop+v.y,q=g===E.Down&&A<=z.y||g===E.Up&&A>=D.y;if(q&&!v.x){f.scrollTo({top:A,behavior:a});return}q?p.y=f.scrollTop-A:p.y=g===E.Down?f.scrollTop-z.y:f.scrollTop-D.y,p.y&&f.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,Re(Je(d,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:i}=this.props;t.preventDefault(),i(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}In.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=Tn,onActivation:r}=t,{active:s}=n;const{code:o}=e.nativeEvent;if(i.start.includes(o)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),r==null||r({event:e.nativeEvent}),!0)}return!1}}];function on(e){return!!(e&&"distance"in e)}function an(e){return!!(e&&"delay"in e)}class Ct{constructor(t,n,i){var r;i===void 0&&(i=ir(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:o}=s;this.props=t,this.events=n,this.document=ze(o),this.documentListeners=new Te(this.document),this.listeners=new Te(i),this.windowListeners=new Te(B(o)),this.initialCoordinates=(r=ft(s))!=null?r:J,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(X.Resize,this.handleCancel),this.windowListeners.add(X.DragStart,sn),this.windowListeners.add(X.VisibilityChange,this.handleCancel),this.windowListeners.add(X.ContextMenu,sn),this.documentListeners.add(X.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(an(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(on(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:i,onPending:r}=this.props;r(i,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(X.Click,rr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(X.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:i,initialCoordinates:r,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!r)return;const l=(n=ft(t))!=null?n:J,c=Je(r,l);if(!i&&a){if(on(a)){if(a.tolerance!=null&&lt(c,a.tolerance))return this.handleCancel();if(lt(c,a.distance))return this.handleStart()}if(an(a)&&lt(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}t.cancelable&&t.preventDefault(),o(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===E.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const or={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class On extends Ct{constructor(t){const{event:n}=t,i=ze(n.target);super(t,or,i)}}On.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const ar={move:{name:"mousemove"},end:{name:"mouseup"}};var gt;(function(e){e[e.RightClick=2]="RightClick"})(gt||(gt={}));class Ln extends Ct{constructor(t){super(t,ar,ze(t.event.target))}}Ln.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button===gt.RightClick?!1:(i==null||i({event:n}),!0)}}];const ut={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jn extends Ct{constructor(t){super(t,ut)}static setup(){return window.addEventListener(ut.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ut.move.name,t)};function t(){}}}jn.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;const{touches:r}=n;return r.length>1?!1:(i==null||i({event:n}),!0)}}];var Ie;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ie||(Ie={}));var Ze;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ze||(Ze={}));function cr(e){let{acceleration:t,activator:n=Ie.Pointer,canScroll:i,draggingRect:r,enabled:s,interval:o=5,order:a=Ze.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:h,delta:d,threshold:v}=e;const p=ur({delta:d,disabled:!s}),[m,f]=Ri(),g=u.useRef({x:0,y:0}),y=u.useRef({x:0,y:0}),R=u.useMemo(()=>{switch(n){case Ie.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Ie.DraggableRect:return r}},[n,r,l]),w=u.useRef(null),x=u.useCallback(()=>{const D=w.current;if(!D)return;const S=g.current.x*y.current.x,M=g.current.y*y.current.y;D.scrollBy(S,M)},[]),z=u.useMemo(()=>a===Ze.TreeOrder?[...c].reverse():c,[a,c]);u.useEffect(()=>{if(!s||!c.length||!R){f();return}for(const D of z){if((i==null?void 0:i(D))===!1)continue;const S=c.indexOf(D),M=h[S];if(!M)continue;const{direction:C,speed:I}=Ji(D,M,R,t,v);for(const A of["x","y"])p[A][C[A]]||(I[A]=0,C[A]=0);if(I.x>0||I.y>0){f(),w.current=D,m(x,o),g.current=I,y.current=C;return}}g.current={x:0,y:0},y.current={x:0,y:0},f()},[t,x,i,f,s,o,JSON.stringify(R),JSON.stringify(p),m,c,z,h,JSON.stringify(v)])}const lr={x:{[T.Backward]:!1,[T.Forward]:!1},y:{[T.Backward]:!1,[T.Forward]:!1}};function ur(e){let{delta:t,disabled:n}=e;const i=ht(t);return Be(r=>{if(n||!i||!r)return lr;const s={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[T.Backward]:r.x[T.Backward]||s.x===-1,[T.Forward]:r.x[T.Forward]||s.x===1},y:{[T.Backward]:r.y[T.Backward]||s.y===-1,[T.Forward]:r.y[T.Forward]||s.y===1}}},[n,t,i])}function dr(e,t){const n=t!=null?e.get(t):void 0,i=n?n.node.current:null;return Be(r=>{var s;return t==null?null:(s=i??r)!=null?s:null},[i,t])}function hr(e,t){return u.useMemo(()=>e.reduce((n,i)=>{const{sensor:r}=i,s=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,i)}));return[...n,...s]},[]),[e,t])}var Le;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Le||(Le={}));var vt;(function(e){e.Optimized="optimized"})(vt||(vt={}));const cn=new Map;function fr(e,t){let{dragging:n,dependencies:i,config:r}=t;const[s,o]=u.useState(null),{frequency:a,measure:l,strategy:c}=r,h=u.useRef(e),d=g(),v=Mt(d),p=u.useCallback(function(y){y===void 0&&(y=[]),!v.current&&o(R=>R===null?y:R.concat(y.filter(w=>!R.includes(w))))},[v]),m=u.useRef(null),f=Be(y=>{if(d&&!n)return cn;if(!y||y===cn||h.current!==e||s!=null){const R=new Map;for(let w of e){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){R.set(w.id,w.rect.current);continue}const x=w.node.current,z=x?new Et(l(x),x):null;w.rect.current=z,z&&R.set(w.id,z)}return R}return y},[e,s,n,d,l]);return u.useEffect(()=>{h.current=e},[e]),u.useEffect(()=>{d||p()},[n,d]),u.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),u.useEffect(()=>{d||typeof a!="number"||m.current!==null||(m.current=setTimeout(()=>{p(),m.current=null},a))},[a,d,p,...i]),{droppableRects:f,measureDroppableContainers:p,measuringScheduled:s!=null};function g(){switch(c){case Le.Always:return!1;case Le.BeforeDragging:return n;default:return!n}}}function kn(e,t){return Be(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function pr(e,t){return kn(e,t)}function gr(e){let{callback:t,disabled:n}=e;const i=Rt(t),r=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(i)},[i,n]);return u.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function At(e){let{callback:t,disabled:n}=e;const i=Rt(t),r=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(i)},[n]);return u.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function vr(e){return new Et(We(e),e)}function ln(e,t,n){t===void 0&&(t=vr);const[i,r]=u.useState(null);function s(){r(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l??n)!=null?c:null}const h=t(e);return JSON.stringify(l)===JSON.stringify(h)?l:h})}const o=gr({callback(l){if(e)for(const c of l){const{type:h,target:d}=c;if(h==="childList"&&d instanceof HTMLElement&&d.contains(e)){s();break}}}}),a=At({callback:s});return de(()=>{s(),e?(a==null||a.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[e]),i}function br(e){const t=kn(e);return Mn(e,t)}const un=[];function mr(e){const t=u.useRef(e),n=Be(i=>e?i&&i!==un&&e&&t.current&&e.parentNode===t.current.parentNode?i:Dt(e):un,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function wr(e){const[t,n]=u.useState(null),i=u.useRef(e),r=u.useCallback(s=>{const o=ct(s.target);o&&n(a=>a?(a.set(o,pt(o)),new Map(a)):null)},[]);return u.useEffect(()=>{const s=i.current;if(e!==s){o(s);const a=e.map(l=>{const c=ct(l);return c?(c.addEventListener("scroll",r,{passive:!0}),[c,pt(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),i.current=e}return()=>{o(e),o(s)};function o(a){a.forEach(l=>{const c=ct(l);c==null||c.removeEventListener("scroll",r)})}},[r,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,o)=>Re(s,o),J):Nn(e):J,[e,t])}function dn(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const i=e!==J;i&&!n.current&&(n.current=e),!i&&n.current&&(n.current=null)},[e]),n.current?Je(e,n.current):J}function yr(e){u.useEffect(()=>{if(!et)return;const t=e.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function xr(e,t){return u.useMemo(()=>e.reduce((n,i)=>{let{eventName:r,handler:s}=i;return n[r]=o=>{s(o,t)},n},{}),[e,t])}function Bn(e){return u.useMemo(()=>e?Yi(e):null,[e])}const hn=[];function Sr(e,t){t===void 0&&(t=We);const[n]=e,i=Bn(n?B(n):null),[r,s]=u.useState(hn);function o(){s(()=>e.length?e.map(l=>Cn(l)?i:new Et(t(l),l)):hn)}const a=At({callback:o});return de(()=>{a==null||a.disconnect(),o(),e.forEach(l=>a==null?void 0:a.observe(l))},[e]),r}function Rr(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ke(t)?t:e}function Mr(e){let{measure:t}=e;const[n,i]=u.useState(null),r=u.useCallback(c=>{for(const{target:h}of c)if(ke(h)){i(d=>{const v=t(h);return d?{...d,width:v.width,height:v.height}:v});break}},[t]),s=At({callback:r}),o=u.useCallback(c=>{const h=Rr(c);s==null||s.disconnect(),h&&(s==null||s.observe(h)),i(h?t(h):null)},[t,s]),[a,l]=dt(o);return u.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const zr=[{sensor:On,options:{}},{sensor:In,options:{}}],Dr={current:{}},Ge={draggable:{measure:rn},droppable:{measure:rn,strategy:Le.WhileDragging,frequency:vt.Optimized},dragOverlay:{measure:We}};class Oe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,i;return(n=(i=this.get(t))==null?void 0:i.node.current)!=null?n:void 0}}const Er={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Oe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Qe},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ge,measureDroppableContainers:Qe,windowRect:null,measuringScheduled:!1},Cr={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Qe,draggableNodes:new Map,over:null,measureDroppableContainers:Qe},Nt=u.createContext(Cr),Ar=u.createContext(Er);function Nr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Oe}}}function Tr(e,t){switch(t.type){case j.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case j.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case j.DragEnd:case j.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case j.RegisterDroppable:{const{element:n}=t,{id:i}=n,r=new Oe(e.droppable.containers);return r.set(i,n),{...e,droppable:{...e.droppable,containers:r}}}case j.SetDroppableDisabled:{const{id:n,key:i,disabled:r}=t,s=e.droppable.containers.get(n);if(!s||i!==s.key)return e;const o=new Oe(e.droppable.containers);return o.set(n,{...s,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case j.UnregisterDroppable:{const{id:n,key:i}=t,r=e.droppable.containers.get(n);if(!r||i!==r.key)return e;const s=new Oe(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Ir(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:r}=u.useContext(Nt),s=ht(i),o=ht(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!i&&s&&o!=null){if(!Sn(s)||document.activeElement===s.target)return;const a=r.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const h of[l.current,c.current]){if(!h)continue;const d=Di(h);if(d){d.focus();break}}})}},[i,t,r,o,s]),null}function Or(e,t){let{transform:n,...i}=t;return e!=null&&e.length?e.reduce((r,s)=>s({transform:r,...i}),n):n}function Lr(e){return u.useMemo(()=>({draggable:{...Ge.draggable,...e==null?void 0:e.draggable},droppable:{...Ge.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ge.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function jr(e){let{activeNode:t,measure:n,initialRect:i,config:r=!0}=e;const s=u.useRef(!1),{x:o,y:a}=typeof r=="boolean"?{x:r,y:r}:r;de(()=>{if(!o&&!a||!t){s.current=!1;return}if(s.current||!i)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const h=n(c),d=Mn(h,i);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const v=zn(c);v&&v.scrollBy({top:d.y,left:d.x})}},[t,o,a,i,n])}const Wn=u.createContext({...J,scaleX:1,scaleY:1});var le;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(le||(le={}));const kr=u.memo(function(t){var n,i,r,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:h=zr,collisionDetection:d=Pi,measuring:v,modifiers:p,...m}=t;const f=u.useReducer(Tr,void 0,Nr),[g,y]=f,[R,w]=Ii(),[x,z]=u.useState(le.Uninitialized),D=x===le.Initialized,{draggable:{active:S,nodes:M,translate:C},droppable:{containers:I}}=g,A=S!=null?M.get(S):null,q=u.useRef({initial:null,translated:null}),W=u.useMemo(()=>{var L;return S!=null?{id:S,data:(L=A==null?void 0:A.data)!=null?L:Dr,rect:q}:null},[S,A]),U=u.useRef(null),[ge,Y]=u.useState(null),[V,_e]=u.useState(null),te=Mt(m,Object.values(m)),ve=zt("DndDescribedBy",o),tt=u.useMemo(()=>I.getEnabled(),[I]),he=Lr(v),{droppableRects:be,measureDroppableContainers:Pe,measuringScheduled:Tt}=fr(tt,{dragging:D,dependencies:[C.x,C.y],config:he.droppable}),G=dr(M,S),It=u.useMemo(()=>V?ft(V):null,[V]),Ot=Jn(),Lt=pr(G,he.draggable.measure);jr({activeNode:S!=null?M.get(S):null,config:Ot.layoutShiftCompensation,initialRect:Lt,measure:he.draggable.measure});const K=ln(G,he.draggable.measure,Lt),nt=ln(G?G.parentElement:null),fe=u.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:be,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),jt=I.getNodeFor((n=fe.current.over)==null?void 0:n.id),pe=Mr({measure:he.dragOverlay.measure}),He=(i=pe.nodeRef.current)!=null?i:G,me=D?(r=pe.rect)!=null?r:K:null,kt=!!(pe.nodeRef.current&&pe.rect),Bt=br(kt?null:K),it=Bn(He?B(He):null),ie=mr(D?jt??G:null),Fe=Sr(ie),qe=Or(p,{transform:{x:C.x-Bt.x,y:C.y-Bt.y,scaleX:1,scaleY:1},activatorEvent:V,active:W,activeNodeRect:K,containerNodeRect:nt,draggingNodeRect:me,over:fe.current.over,overlayNodeRect:pe.rect,scrollableAncestors:ie,scrollableAncestorRects:Fe,windowRect:it}),Wt=It?Re(It,C):null,_t=wr(ie),Un=dn(_t),$n=dn(_t,[K]),we=Re(qe,Un),ye=me?qi(me,qe):null,De=W&&ye?d({active:W,collisionRect:ye,droppableRects:be,droppableContainers:tt,pointerCoordinates:Wt}):null,Pt=Wi(De,"id"),[re,Ht]=u.useState(null),Xn=kt?qe:Re(qe,$n),Yn=Hi(Xn,(s=re==null?void 0:re.rect)!=null?s:null,K),rt=u.useRef(null),Ft=u.useCallback((L,_)=>{let{sensor:P,options:se}=_;if(U.current==null)return;const $=M.get(U.current);if(!$)return;const H=L.nativeEvent,Q=new P({active:U.current,activeNode:$,event:H,options:se,context:fe,onAbort(O){if(!M.get(O))return;const{onDragAbort:Z}=te.current,ne={id:O};Z==null||Z(ne),R({type:"onDragAbort",event:ne})},onPending(O,oe,Z,ne){if(!M.get(O))return;const{onDragPending:Ce}=te.current,ae={id:O,constraint:oe,initialCoordinates:Z,offset:ne};Ce==null||Ce(ae),R({type:"onDragPending",event:ae})},onStart(O){const oe=U.current;if(oe==null)return;const Z=M.get(oe);if(!Z)return;const{onDragStart:ne}=te.current,Ee={activatorEvent:H,active:{id:oe,data:Z.data,rect:q}};ue.unstable_batchedUpdates(()=>{ne==null||ne(Ee),z(le.Initializing),y({type:j.DragStart,initialCoordinates:O,active:oe}),R({type:"onDragStart",event:Ee}),Y(rt.current),_e(H)})},onMove(O){y({type:j.DragMove,coordinates:O})},onEnd:xe(j.DragEnd),onCancel:xe(j.DragCancel)});rt.current=Q;function xe(O){return async function(){const{active:Z,collisions:ne,over:Ee,scrollAdjustedTranslate:Ce}=fe.current;let ae=null;if(Z&&Ce){const{cancelDrop:Ae}=te.current;ae={activatorEvent:H,active:Z,collisions:ne,delta:Ce,over:Ee},O===j.DragEnd&&typeof Ae=="function"&&await Promise.resolve(Ae(ae))&&(O=j.DragCancel)}U.current=null,ue.unstable_batchedUpdates(()=>{y({type:O}),z(le.Uninitialized),Ht(null),Y(null),_e(null),rt.current=null;const Ae=O===j.DragEnd?"onDragEnd":"onDragCancel";if(ae){const st=te.current[Ae];st==null||st(ae),R({type:Ae,event:ae})}})}}},[M]),Vn=u.useCallback((L,_)=>(P,se)=>{const $=P.nativeEvent,H=M.get(se);if(U.current!==null||!H||$.dndKit||$.defaultPrevented)return;const Q={active:H};L(P,_.options,Q)===!0&&($.dndKit={capturedBy:_.sensor},U.current=se,Ft(P,_))},[M,Ft]),qt=hr(h,Vn);yr(h),de(()=>{K&&x===le.Initializing&&z(le.Initialized)},[K,x]),u.useEffect(()=>{const{onDragMove:L}=te.current,{active:_,activatorEvent:P,collisions:se,over:$}=fe.current;if(!_||!P)return;const H={active:_,activatorEvent:P,collisions:se,delta:{x:we.x,y:we.y},over:$};ue.unstable_batchedUpdates(()=>{L==null||L(H),R({type:"onDragMove",event:H})})},[we.x,we.y]),u.useEffect(()=>{const{active:L,activatorEvent:_,collisions:P,droppableContainers:se,scrollAdjustedTranslate:$}=fe.current;if(!L||U.current==null||!_||!$)return;const{onDragOver:H}=te.current,Q=se.get(Pt),xe=Q&&Q.rect.current?{id:Q.id,rect:Q.rect.current,data:Q.data,disabled:Q.disabled}:null,O={active:L,activatorEvent:_,collisions:P,delta:{x:$.x,y:$.y},over:xe};ue.unstable_batchedUpdates(()=>{Ht(xe),H==null||H(O),R({type:"onDragOver",event:O})})},[Pt]),de(()=>{fe.current={activatorEvent:V,active:W,activeNode:G,collisionRect:ye,collisions:De,droppableRects:be,draggableNodes:M,draggingNode:He,draggingNodeRect:me,droppableContainers:I,over:re,scrollableAncestors:ie,scrollAdjustedTranslate:we},q.current={initial:me,translated:ye}},[W,G,De,ye,M,He,me,be,I,re,ie,we]),cr({...Ot,delta:C,draggingRect:ye,pointerCoordinates:Wt,scrollableAncestors:ie,scrollableAncestorRects:Fe});const Gn=u.useMemo(()=>({active:W,activeNode:G,activeNodeRect:K,activatorEvent:V,collisions:De,containerNodeRect:nt,dragOverlay:pe,draggableNodes:M,droppableContainers:I,droppableRects:be,over:re,measureDroppableContainers:Pe,scrollableAncestors:ie,scrollableAncestorRects:Fe,measuringConfiguration:he,measuringScheduled:Tt,windowRect:it}),[W,G,K,V,De,nt,pe,M,I,be,re,Pe,ie,Fe,he,Tt,it]),Kn=u.useMemo(()=>({activatorEvent:V,activators:qt,active:W,activeNodeRect:K,ariaDescribedById:{draggable:ve},dispatch:y,draggableNodes:M,over:re,measureDroppableContainers:Pe}),[V,qt,W,K,y,ve,M,re,Pe]);return k.createElement(Rn.Provider,{value:w},k.createElement(Nt.Provider,{value:Kn},k.createElement(Ar.Provider,{value:Gn},k.createElement(Wn.Provider,{value:Yn},c)),k.createElement(Ir,{disabled:(a==null?void 0:a.restoreFocus)===!1})),k.createElement(ji,{...a,hiddenTextDescribedById:ve}));function Jn(){const L=(ge==null?void 0:ge.autoScrollEnabled)===!1,_=typeof l=="object"?l.enabled===!1:l===!1,P=D&&!L&&!_;return typeof l=="object"?{...l,enabled:P}:{enabled:P}}}),Br=u.createContext(null),fn="button",Wr="Draggable";function _r(e){let{id:t,data:n,disabled:i=!1,attributes:r}=e;const s=zt(Wr),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:h,draggableNodes:d,over:v}=u.useContext(Nt),{role:p=fn,roleDescription:m="draggable",tabIndex:f=0}=r??{},g=(l==null?void 0:l.id)===t,y=u.useContext(g?Wn:Br),[R,w]=dt(),[x,z]=dt(),D=xr(o,t),S=Mt(n);de(()=>(d.set(t,{id:t,key:s,node:R,activatorNode:x,data:S}),()=>{const C=d.get(t);C&&C.key===s&&d.delete(t)}),[d,t]);const M=u.useMemo(()=>({role:p,tabIndex:f,"aria-disabled":i,"aria-pressed":g&&p===fn?!0:void 0,"aria-roledescription":m,"aria-describedby":h.draggable}),[i,p,f,g,m,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:M,isDragging:g,listeners:i?void 0:D,node:R,over:v,setNodeRef:w,setActivatorNodeRef:z,transform:y}}function Pr({children:e,id:t,onMouseDown:n,setModalController:i}){const{attributes:r,listeners:s,node:o,setNodeRef:a}=_r({id:t}),l={...s,onMouseDown:c=>{n&&o.current&&n(),s==null||s.onMouseDown(c)}};return u.useEffect(()=>{i(c=>({...c,handleDragListener:l}))},[n]),b.jsx(Hr,{ref:a,...r,className:"ModalDraggable__SLayout",children:e})}const Hr=F.div`
  /* position: absolute; */
  /* overflow: auto; */
  width: 100%;
  height: 100%;
`;function _n({id:e,active:t,setModalBbox:n,modalFlag:i,setModalController:r,modalRef:s,children:o,onBringToFront:a,innerBoundSizeUnitPixel:l}){var y,R;const[c,h]=u.useState({x:void 0,y:void 0}),d=u.useCallback(()=>{var w,x,z,D,S,M;a&&a(),h({x:ce((z=(x=(w=s.current)==null?void 0:w.resizableContainer)==null?void 0:x.resizable)==null?void 0:z.style.left),y:ce((M=(S=(D=s.current)==null?void 0:D.resizableContainer)==null?void 0:S.resizable)==null?void 0:M.style.top)})},[h,(R=(y=s.current)==null?void 0:y.resizableContainer)==null?void 0:R.resizable,a]),v=u.useCallback(w=>{const x=w.delta;n(z=>{const D=ce(z.width),S=ce(z.height);return!D||!S?z:{...z,x:Math.min(Math.max(Number(ce(c.x))+x.x,0),document.documentElement.clientWidth-D-l*2),y:Math.min(Math.max(Number(ce(c.y))+x.y,0),document.documentElement.clientHeight-S-l*2)}})},[c,n]),p=t&&!i.isMaximize,m=nn(Ln,{activationConstraint:{distance:10}}),f=nn(jn,{activationConstraint:{distance:10}}),g=ki(m,f);return b.jsx(kr,{sensors:g,onDragMove:p?v:void 0,children:b.jsx(Pr,{onMouseDown:p?d:void 0,id:e,setModalController:r,children:o})})}_n.__docgenInfo={description:"",methods:[],displayName:"ModalDraggable",props:{id:{required:!0,tsType:{name:"string"},description:""},active:{required:!0,tsType:{name:"boolean"},description:""},setModalBbox:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<IModalBbox>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<IModalBbox>",elements:[{name:"IModalBbox"}]}]},description:""},modalFlag:{required:!0,tsType:{name:"IModalFlag"},description:""},setModalController:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<IModalController>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<IModalController>",elements:[{name:"IModalController"}]}]},description:""},modalRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<IModalRef>",elements:[{name:"IModalRef"}]},description:""},onBringToFront:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},innerBoundSizeUnitPixel:{required:!0,tsType:{name:"number"},description:""}}};function Pn({innerBoundSizeUnitPixel:e,onBringToFront:t,modal:n}){var d,v,p,m;const i=je(f=>f.setState),[r,s]=u.useState(()=>{var R,w,x,z,D,S,M,C;const f=((w=(R=n.container)==null?void 0:R.style)==null?void 0:w.width)||Ue.WIDTH,g=((z=(x=n.container)==null?void 0:x.style)==null?void 0:z.height)||Ue.HEIGHT;return{x:(document.documentElement.clientWidth-(ce(f)||Ue.WIDTH))/2,y:(document.documentElement.clientHeight-(ce(g)||Ue.HEIGHT))/2,width:f,height:g,minWidth:((S=(D=n.container)==null?void 0:D.style)==null?void 0:S.minWidth)||f,minHeight:((C=(M=n.container)==null?void 0:M.style)==null?void 0:C.minHeight)||g}});u.useLayoutEffect(()=>{if(r.width!=="auto"&&r.height!=="auto")return;const f=document.querySelector(".ModalView_root"),g=f&&(f==null?void 0:f.getBoundingClientRect());g&&s(y=>({...y,x:(window.innerWidth-g.width)/2,y:(window.innerHeight-g.height)/2,width:g.width,height:g.height,...r.minWidth&&r.minWidth!=="auto"?null:{minWidth:g.width},...r.minHeight&&r.minHeight!=="auto"?null:{minHeight:g.height}}))},[]);const[o,a]=u.useState({isMaximize:!1,isResizable:((v=(d=n.container)==null?void 0:d.resize)==null?void 0:v.able)??!1,isDraggable:((m=(p=n.container)==null?void 0:p.dragAndDrop)==null?void 0:m.able)??!1}),[l,c]=u.useState({handleClose:void 0,handleMaximize:void 0,handleDragListener:void 0}),h=u.useRef({resizableContainer:null});return b.jsx(wn,{active:o.isResizable&&!o.isMaximize,modalBbox:r,setModalBbox:s,modalFlag:o,modalRef:h,onBringToFront:t,children:b.jsx(_n,{id:n.metadata.id,active:o.isDraggable&&!o.isMaximize,setModalBbox:s,modalFlag:o,setModalController:c,modalRef:h,onBringToFront:t,innerBoundSizeUnitPixel:e,children:b.jsx(Si,{id:n.metadata.id,setModalJotai:i,modalFlag:o,setModalFlag:a,setModalController:c,children:u.useMemo(()=>typeof n.component=="function"?n.component({modalController:l,setModalController:c,modalFlag:o}):n.component,[l,c,o])})})})}Pn.__docgenInfo={description:"",methods:[],displayName:"ModalContainer",props:{innerBoundSizeUnitPixel:{required:!0,tsType:{name:"number"},description:""},modal:{required:!0,tsType:{name:"ImodalsComponentAtom"},description:""},onBringToFront:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function Fr(){var l;const e=je(c=>c),{show:t,dim:n,documentBody:i,modals:r}={show:(()=>{var c;return!!(e!=null&&e.show&&Array.isArray(e==null?void 0:e.modals)&&((c=e==null?void 0:e.modals)==null?void 0:c.length)>0)})(),dim:{active:!0,isCloseOnDimClick:!0,innerBoundSizeUnitPixel:bn,...e==null?void 0:e.dim},documentBody:{style:{overflow:"hidden",...(l=e==null?void 0:e.documentBody)==null?void 0:l.style}},modals:(e==null?void 0:e.modals)??[]};u.useMemo(()=>{const c=r.map(d=>d.metadata.id),h=new Set(c);return c.length!==h.size},[r])&&console.warn("중복된 modal id가 감지되었습니다. key 충돌이 발생할 수 있습니다.");const o=u.useRef(null);u.useEffect(function(){const h=document.body.style,d=i==null?void 0:i.style;return t&&d&&o.current!==d&&(Object.entries(d).forEach(([v,p])=>{typeof p=="string"&&(h[v]=p)}),o.current=d),!t&&o.current&&(Object.keys(o.current).forEach(v=>{h.removeProperty(v)}),o.current=null),()=>{o.current&&(Object.keys(o.current).forEach(v=>{h.removeProperty(v)}),o.current=null)}},[t,r,i]);const a=c=>()=>{if(!(e!=null&&e.setState)){console.error("setModalTop에서 에러가 발생.");return}e.setState(h=>{const d=h.modals.find(p=>p.metadata.id===c);if(!d)return h;const v=h.modals.filter(p=>p.metadata.id!==c);return{...h,modals:[...v,d]}})};return t?ue.createPortal(b.jsx(mn,{styles:n==null?void 0:n.styles,active:n.active,innerBoundSizeUnitPixel:n.innerBoundSizeUnitPixel,isCloseOnDimClick:n.isCloseOnDimClick,children:r.map((c,h)=>b.jsx(Pn,{innerBoundSizeUnitPixel:n.innerBoundSizeUnitPixel,onBringToFront:a(c.metadata.id),modal:c},c.metadata.id))}),document.body):null}function Hn(e){const t={width:"400px",height:"300px",overflow:"auto"};switch(e){case"default":break;case"hug":t.width="auto",t.height="auto";break;case"setting":t.width="650px",t.height="700px";break}return t}const pn=e=>Symbol.iterator in e,gn=e=>"entries"in e,vn=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),i=t instanceof Map?t:new Map(t.entries());if(n.size!==i.size)return!1;for(const[r,s]of n)if(!Object.is(s,i.get(r)))return!1;return!0},qr=(e,t)=>{const n=e[Symbol.iterator](),i=t[Symbol.iterator]();let r=n.next(),s=i.next();for(;!r.done&&!s.done;){if(!Object.is(r.value,s.value))return!1;r=n.next(),s=i.next()}return!!r.done&&!!s.done};function Ur(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?!1:pn(e)&&pn(t)?gn(e)&&gn(t)?vn(e,t):qr(e,t):vn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)})}function Fn(e){const t=k.useRef(void 0);return n=>{const i=e(n);return Ur(t.current,i)?t.current:t.current=i}}function qn(){const e="MultipleModal1",[t,n]=u.useState(),{setModalJotai:i,modals:r}=je(Fn(o=>({setModalJotai:o.setState,modals:o.modals})));u.useMemo(()=>Hn("default"),[]),u.useEffect(()=>{t&&!r.find(o=>o.metadata.id===e)&&n(void 0)},[r]);const s=u.useCallback(()=>{if(t){n(void 0),i(o=>({...o,documentBody:void 0,modals:o.modals.filter(a=>a.metadata.id!==t)}));return}n(e),i(o=>({...o,dim:{active:!1},modals:[...o.modals,{metadata:{id:String(e)},container:{dragAndDrop:{able:!0}},component:({modalController:a,modalFlag:l})=>b.jsxs(yt,{children:[" ",b.jsx(wt,{title:"두번째 모달",onClose:()=>{n(void 0)},modalController:a,modalFlag:l}),b.jsx(bt,{}),b.jsx(mt,{modalController:a})]})}]}))},[t,n,i]);return b.jsx("div",{children:b.jsx("button",{onClick:s,children:"두번째 모달 열기"})})}qn.__docgenInfo={description:"",methods:[],displayName:"MultipleModal"};function $r({title:e,dim:t,id:n,content:i,footerVariantName:r,container:s,showCancelBtn:o,showMaximizeBtn:a,showMultipleModal:l}){const[c,h]=u.useState(),{setModalJotai:d,modals:v}=je(Fn(f=>({setModalJotai:f.setState,modals:f.modals}))),p=u.useMemo(()=>Hn("hug"),[]);u.useEffect(()=>{c&&!v.find(f=>f.metadata.id===n)&&h(void 0)},[v]);const m=u.useCallback(()=>{if(c){h(void 0),d(f=>({...f,documentBody:void 0,modals:f.modals.filter(g=>g.metadata.id!==c)}));return}h(n),d(f=>({...f,dim:t||void 0,modals:[...f.modals,{metadata:{id:String(n)},container:{...s,style:{...p,...s==null?void 0:s.style}},component:({modalController:g,modalFlag:y})=>b.jsxs(yt,{children:[!e&&!o&&!a?null:b.jsx(wt,{title:e,onClose:()=>{h(void 0)},modalController:g,modalFlag:y,showCancelBtn:o,showMaximizeBtn:a}),b.jsx(bt,{children:i||null}),b.jsx(mt,{variant:r,modalController:g})]})}]}))},[c,h,d]);return b.jsxs(Xr,{className:"layout",children:[b.jsx("button",{onClick:m,children:"모달 열기"}),l?b.jsx(qn,{}):null,b.jsx(Fr,{})]})}const Xr=F.div`
  width: 100%;
  height: 100vh;
`;$r.__docgenInfo={description:`가장 기본적인 형태의 모달 예시\r
@param param0\r
@returns`,methods:[],displayName:"Basic",props:{title:{required:!1,tsType:{name:"string"},description:""},dim:{required:!1,tsType:{name:'ImodalsAtom["dim"]',raw:'ImodalsAtom["dim"]'},description:""},id:{required:!0,tsType:{name:"string"},description:""},content:{required:!1,tsType:{name:"ReactNode"},description:""},footerVariantName:{required:!1,tsType:{name:"union",raw:'"alert" | "confirm" | "prompt"',elements:[{name:"literal",value:'"alert"'},{name:"literal",value:'"confirm"'},{name:"literal",value:'"prompt"'}]},description:""},container:{required:!1,tsType:{name:'ImodalsAtom["modals"]["0"]["container"]',raw:'ImodalsAtom["modals"]["0"]["container"]'},description:""},showCancelBtn:{required:!1,tsType:{name:"boolean"},description:""},showMaximizeBtn:{required:!1,tsType:{name:"boolean"},description:""},showMultipleModal:{required:!1,tsType:{name:"boolean"},description:""}}};export{$r as B};
